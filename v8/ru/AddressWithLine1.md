---
title: Создание доставки с полем адреса Line1.
layout: default
tags: v8
---
В API V8 появилась возможность создавать доставки, где адрес, вместо полей город, улица, дом, корпус, формируется с помощью поля [Line1](https://iiko.github.io/front.api.sdk/v8/html/P_Resto_Front_Api_Data_Brd_IAddress_Line1.htm).

`Line1` - это часть адреса, которая указывает, как найти объект на карте при геокодировании.

Пример: `Москва, Варшавское шоссе, д.86, корп.2`

Для формирования адреса нужно включить в настройках ресторана 
(`Администрирование -> Настройки торгового предприятия -> Основные настройки`) на главной странице в разделе "`Формат адреса доставки`"(внизу страницы настроек) 
пункт "`Использовать новый формат адреса`" и выбрать ниже режим: Поля `"Куда везти", "квартира", "этаж"...`
После этого нужно перезапустить iikoFront и iikoOffice для применения настроек отображения адресов.

Особенность формирования запроса: 

При создании доставки поля адреса ([AddressDto](https://iiko.github.io/front.api.sdk/v8/html/T_Resto_Front_Api_Data_Brd_AddressDto.htm))  ``StreetId и House`` должны быть заполнены ледующим образом:<br>
`StreetId = f8aaf1ec-8f46-907f-9357-e4c27bab5f78` - Id пустой улицы в БД (одинаковый для всех баз).<br>
`House = ""` - пустая строка или string.Empty, но отсутствие данного поля недопустимо.<br>

Пример формирования адреса: 

```cs
var address = new AddressDto
{
   Line1 = "Москва, Варшавское шоссе,д.80,корп.2",
   StreetId = Guid.Parse("f8aaf1ec-8f46-907f-9357-e4c27bab5f78"),
   House = "",
   Flat = "37",
   Floor = "2",
   AdditionalInfo = "Детали адреса",
   Doorphone = "37",
   Entrance = "3"
};
```

